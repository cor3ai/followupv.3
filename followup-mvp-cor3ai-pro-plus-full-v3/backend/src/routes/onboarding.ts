import { Router } from 'express'; import { prisma } from '../prisma/client.js'; import { requireAuth, AuthRequest } from '../middleware/auth.js'; export const router=Router(); router.use(requireAuth); router.get('/',async(req:AuthRequest,res)=>{const ob=await prisma.onboardingProgress.findUnique({where:{organizationId:req!.user!.orgId}}); res.json(ob)}); router.post('/',async(req:AuthRequest,res)=>{const data=req.body||{}; const ob=await prisma.onboardingProgress.upsert({where:{organizationId:req!.user!.orgId},update:data,create:{organizationId:req!.user!.orgId,...data}}); res.json(ob)})
